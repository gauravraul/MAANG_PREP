# System Design Interview Q&A – Set 5 (Very Hard / Expert Level)

---

## Q1: Design a Global Low-Latency Trading Platform

### Answer:

### Functional Requirements:
- Buy and sell orders
- Real-time price feed
- Order matching
- Portfolio updates

### Non-Functional Requirements:
- Ultra-low latency
- Strong consistency
- Fault tolerance

### Architecture:
Client → API Gateway → Order Management System (OMS) → Matching Engine  
Market Data Service → Cache → Client  
OMS → DB & Event Bus

### Matching Engine:
- In-memory order book (buy & sell priority queues)
- FIFO matching at same price
- Continuous double auction model

### Data Handling:
- Append-only event log
- Event replay for state recovery
- Snapshots for faster startup

### Consistency:
- Atomic transactions for order state changes
- Two-phase commit between OMS and DB

### Scaling:
- Shard by instrument/ticker
- Co-locate matching engine and data stores
- Use RDMA or zero-copy messaging (where applicable)

---

## Q2: Design a Cloud-Native Serverless Platform (Like AWS Lambda)

### Answer:

### Requirements:
- Upload function code
- Execute on demand
- Auto-scale
- Pay-per-execution

### Architecture:
User → API → Control Plane → Scheduler → Worker Pool  

### Components:
- **API & Control Plane** (auth, config, quotas)
- **Scheduler** (assigns invocations to workers)
- **Workers** (execute functions in containers / microVMs)
- **Image Registry** (function code)
- **Metrics/Billing Service**

### Execution:
- Cold start vs warm start
- Function isolation using firecracker/VMs/containers
- Resource limits (CPU, memory, time)

### Scaling:
- Auto-scale workers
- Pre-warm pool for hot functions
- Queue-based buffering

---

## Q3: Design a High-Performance Distributed Cache (Beyond Redis)

### Answer:

### Requirements:
- Sub-millisecond reads
- Horizontal scaling
- Fine-grained eviction
- TTL & versioning

### Architecture:
Router → Cache Proxy → Cache Nodes  

### Data Placement:
- Consistent hashing
- Data is sharded and replicated

### Replication:
- Quorum reads/writes
- Vector clocks or version numbers

### Eviction:
- Segmented LRU (SLRU)
- Adaptive replacement cache (ARC)

### Failure Handling:
- Automatic failover
- Anti-entropy repair
- Background replication heal

---

## Q4: Design a Distributed Transaction System (Two-Phase Commit at Scale)
