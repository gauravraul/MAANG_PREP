# 10 Medium Difficulty System Design Questions and Answers

## 1. Design a URL Shortener (like bit.ly)
**Question:** How would you design a system to shorten long URLs and redirect users to the original URL?  
**Answer:**  
- **Components:** Web server, database (SQL/NoSQL), hashing service.  
- **Flow:**  
  1. User submits long URL → server generates short code using hashing (Base62).  
  2. Store mapping `{short_code: long_url}` in DB.  
  3. Redirect when short code is visited.  
- **Challenges:** Avoid collisions, scaling reads, caching popular links (Redis).  
- **Tech Choices:** Redis for cache, PostgreSQL or DynamoDB for persistence.  

---

## 2. Design a Rate Limiter
**Question:** How would you prevent abuse of an API using a rate-limiting system?  
**Answer:**  
- **Approaches:**  
  - Token bucket  
  - Leaky bucket  
  - Fixed window counter  
  - Sliding window log  
- **Implementation:**  
  - Use Redis to store request count per user with TTL.  
  - Check & decrement tokens before processing request.  
- **Challenges:** Low latency, accuracy, distributed synchronization.  

---

## 3. Design a Chat Application (like WhatsApp)
**Question:** How would you design real-time messaging between users?  
**Answer:**  
- **Components:** WebSocket server, message queue (Kafka), database (Cassandra/MongoDB), push notification service.  
- **Flow:**  
  1. Client connects via WebSocket → messages sent instantly.  
  2. Store messages for offline delivery.  
  3. Push notifications for offline users.  
- **Challenges:** Message ordering, offline delivery, scalability.  

---

## 4. Design an Online Code Execution System (like LeetCode)
**Question:** How would you design a platform to run user-submitted code safely?  
**Answer:**  
- **Components:** API gateway, code execution service in isolated Docker containers, job queue, results DB.  
- **Flow:**  
  1. Code submitted → pushed to job queue.  
  2. Worker executes in sandbox (container/VM).  
  3. Store output & return to user.  
- **Challenges:** Security, sandboxing, scaling compute, timeout handling.  

---

## 5. Design a Notification System
**Question:** How would you design a system to send email/SMS/push notifications?  
**Answer:**  
- **Components:** Notification service, message queue (RabbitMQ/Kafka), third-party email/SMS APIs.  
- **Flow:**  
  1. Event triggers → send to queue.  
  2. Workers consume queue & send notification.  
- **Challenges:** Handling retries, prioritization, ensuring delivery guarantees.  

---

## 6. Design a Search Autocomplete System
**Question:** How would you implement real-time search suggestions?  
**Answer:**  
- **Approach:** Prefix-based search using Trie or n-gram index.  
- **Flow:**  
  1. User types → query prefix sent to server.  
  2. Server returns top matches from cache (Redis) or search index (Elasticsearch).  
- **Challenges:** Latency under 100ms, ranking results, handling typos.  

---

## 7. Design a Distributed Logging System
**Question:** How would you collect and analyze logs from multiple services?  
**Answer:**  
- **Components:** Log agents (Fluentd/Filebeat), message queue (Kafka), storage (Elasticsearch/S3), analytics UI (Kibana).  
- **Flow:**  
  1. Logs collected locally → sent to Kafka.  
  2. Consumer pushes logs to Elasticsearch.  
- **Challenges:** High throughput, search performance, data retention.  

---

## 8. Design a Video Streaming Service (like YouTube)
**Question:** How would you design a system to serve videos?  
**Answer:**  
- **Components:** CDN, video encoding service, storage (S3), metadata DB.  
- **Flow:**  
  1. Upload video → transcode to multiple resolutions.  
  2. Store on CDN for fast delivery.  
- **Challenges:** Bandwidth optimization, adaptive bitrate streaming, scaling uploads.  

---

## 9. Design a Leaderboard System
**Question:** How would you keep track of top players in real-time?  
**Answer:**  
- **Approach:** Use Redis sorted sets (ZADD, ZRANGE).  
- **Flow:**  
  1. Update score in Redis on each game event.  
  2. Query sorted set for top N players.  
- **Challenges:** Handling millions of players, ensuring eventual consistency with DB.  

---

## 10. Design a File Upload Service
**Question:** How would you design a service for large file uploads?  
**Answer:**  
- **Components:** API server, object storage (S3/GCS), chunked uploads, CDN.  
- **Flow:**  
  1. Client uploads in chunks → server verifies each chunk.  
  2. Combine chunks → store in storage.  
- **Challenges:** Resumable uploads, deduplication, virus scanning.  

---
