# Medium Difficulty System Design Questions & Answers (Set 2)

## 1. Design a Rate Limiter
**Question:** How would you design a system to limit the number of API requests from a single user to 100 requests per minute?  
**Answer:**  
- Use a **Token Bucket** or **Leaky Bucket** algorithm.  
- Maintain a counter for each user in **Redis** with TTL = 1 minute.  
- Increment counter on each request.  
- Reject requests when counter > 100 until TTL resets.

---

## 2. Design a Short URL Service (bit.ly)
**Question:** How would you create a service to shorten URLs and redirect to the original?  
**Answer:**  
- **Write path:** Generate a short ID (Base62 encoded) for the original URL, store in **NoSQL** like DynamoDB.  
- **Read path:** Lookup ID and redirect.  
- Use caching (Redis) for popular links.  
- Use load balancers to handle traffic spikes.

---

## 3. Design a File Upload Service
**Question:** How would you design a service where users can upload large files (up to 10GB)?  
**Answer:**  
- Support **multipart uploads** directly to object storage (S3, GCS).  
- Store file metadata in a relational DB.  
- Use a CDN for file delivery.  
- Add virus scanning before making the file available.

---

## 4. Design a Search Autocomplete System
**Question:** How would you implement real-time search suggestions?  
**Answer:**  
- Use a **Trie** or **Prefix Tree** to store popular queries.  
- Precompute rankings based on search frequency.  
- Cache popular results in Redis.  
- Update trie periodically from logs.

---

## 5. Design a Live Chat Application
**Question:** How would you design a chat app with real-time messaging?  
**Answer:**  
- Use WebSockets or long polling.  
- Messages stored in a NoSQL DB (e.g., MongoDB) with user and timestamp.  
- Deliver via a **Pub/Sub** system like Kafka.  
- Add typing indicators via ephemeral events.

---

## 6. Design a Notification Service
**Question:** How would you send notifications (email, push, SMS) to millions of users?  
**Answer:**  
- Use an event queue (Kafka, RabbitMQ).  
- Separate workers for each channel (email, SMS, push).  
- Use third-party APIs (SES, Twilio, FCM) for delivery.  
- Implement retry with exponential backoff.

---

## 7. Design an E-commerce Product Catalog
**Question:** How would you store and retrieve millions of products efficiently?  
**Answer:**  
- Use a NoSQL DB (ElasticSearch for search, DynamoDB for metadata).  
- Cache popular products in Redis.  
- Use pagination and query optimization.  
- Store images in CDN-backed object storage.

---

## 8. Design a Payment Processing System
**Question:** How would you design a system to process online payments securely?  
**Answer:**  
- Integrate with payment gateways (Stripe, PayPal).  
- Use HTTPS and encrypt sensitive data (PCI DSS compliance).  
- Store transactions in a relational DB.  
- Implement retry for failed payments and idempotency keys.

---

## 9. Design a Metrics Monitoring System
**Question:** How would you design a system to collect and display application metrics?  
**Answer:**  
- Collect metrics via agents (Prometheus Node Exporter).  
- Store in time-series DB (Prometheus, InfluxDB).  
- Use Grafana for visualization.  
- Set up alerts based on thresholds.

---

## 10. Design an Online Multiplayer Game Lobby
**Question:** How would you design a system for players to join game lobbies?  
**Answer:**  
- Store lobby states in Redis (fast read/write).  
- Use WebSockets for real-time updates.  
- Assign players via matchmaking service based on rank.  
- Persist game history in a relational DB.

---
