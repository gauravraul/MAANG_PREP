# Medium Difficulty System Design Questions & Answers

## 1. Design a Pastebin-like service
**Question:** How would you design a system like Pastebin where users can store and share text snippets?

**Answer:**
- **Requirements:** Short unique URL, text storage, expiry time, basic analytics.
- **Architecture:** 
  - API service (POST text, GET text)
  - Unique key generator (Base62 encoding of counter or hash)
  - Database (NoSQL like DynamoDB for scalability)
  - Cache (Redis for hot data)
- **Scaling:** 
  - Shard database by key hash
  - Use CDN for static content
  - Expire old data with TTL.

---

## 2. Design a Rate Limiter for APIs
**Question:** How would you implement a system that limits API calls per user?

**Answer:**
- **Techniques:** Token bucket, leaky bucket, fixed window, sliding window.
- **Architecture:** 
  - Store request count in Redis with TTL
  - Atomic increment for each request
  - Reject if limit reached.
- **Scaling:** 
  - Use distributed Redis cluster
  - Sync counters across nodes.

---

## 3. Design a Video Streaming Service (e.g., YouTube)
**Question:** How would you design a video-on-demand system?

**Answer:**
- **Architecture:**
  - Video upload → Transcoding service (FFmpeg on worker nodes)
  - Store videos on cloud storage (S3/GCS)
  - Use CDN for delivery
  - Metadata in SQL DB
  - Search indexing via Elasticsearch
- **Scaling:** 
  - Separate read/write databases
  - Chunked uploads
  - Adaptive bitrate streaming (HLS/DASH).

---

## 4. Design a Real-time Chat Application
**Question:** How would you design a WhatsApp-like chat system?

**Answer:**
- **Architecture:**
  - WebSocket or MQTT for real-time delivery
  - Message store in NoSQL (Cassandra) with partitioning by user ID
  - Delivery status tracking
  - Offline message queue
- **Scaling:**
  - Horizontal scaling of messaging servers
  - Use Kafka for message fan-out.

---

## 5. Design a News Feed System (e.g., Facebook)
**Question:** How would you build a personalized feed system?

**Answer:**
- **Architecture:**
  - Fan-out on write: Push posts to followers’ feeds
  - Fan-out on read: Generate feed when requested
  - Store feeds in Redis for quick retrieval
  - Ranking based on engagement signals
- **Scaling:**
  - Precompute top stories
  - Partition by user ID.

---

## 6. Design a URL Shortener
**Question:** How would you build bit.ly?

**Answer:**
- **Architecture:**
  - API to create and resolve URLs
  - Short code generation via counter + Base62
  - Store mapping in key-value DB (Redis + persistent DB)
  - TTL for expiring links
- **Scaling:**
  - Read-heavy → Use CDN
  - Shard storage by hash prefix.

---

## 7. Design a File Storage Service (e.g., Google Drive)
**Question:** How would you design an online file storage and sharing platform?

**Answer:**
- **Architecture:**
  - File chunking for upload
  - Store metadata in SQL DB
  - Actual files in object storage
  - Access control lists for permissions
- **Scaling:**
  - CDN for frequently accessed files
  - Background deduplication.

---

## 8. Design a Leaderboard System
**Question:** How would you design a real-time gaming leaderboard?

**Answer:**
- **Architecture:**
  - Store player scores in Redis Sorted Sets
  - Update scores in real-time
  - Periodic persistence to SQL/NoSQL DB
- **Scaling:**
  - Partition by game ID
  - Use pub/sub to notify clients.

---

## 9. Design an Email Sending Service
**Question:** How would you design a system that sends millions of emails daily?

**Answer:**
- **Architecture:**
  - Queue (Kafka/SQS) for incoming email jobs
  - Worker services to send emails via SMTP
  - Store logs and delivery status
- **Scaling:**
  - Use multiple SMTP providers
  - Retry with exponential backoff
  - Rate limiting per provider.

---

## 10. Design a Search Autocomplete Feature
**Question:** How would you design an autocomplete for a search box?

**Answer:**
- **Architecture:**
  - Trie or prefix tree for storing queries
  - Store popularity counts
  - Backend API returns top N matches
- **Scaling:**
  - Cache popular results in Redis
  - Precompute for trending searches.
