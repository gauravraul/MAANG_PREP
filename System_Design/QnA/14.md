# System Design Interview Q&A – Set 6 (Principal / Architect Level)

---

## Q1: Design a Global Configuration Propagation System (Millions of Nodes)

### Answer:

### Requirements:
- Update config in near real-time
- Support partial rollout
- Strong consistency per service
- Rollback

### Architecture:
Admin API → Config Control Plane → Regional Distributors → Edge Agents

### Mechanics:
- Versioned configs
- Signed config bundles
- Push + Pull hybrid
- Long-poll / streaming updates

### Consistency:
- Per-service strong consistency
- Global eventual propagation
- Monotonic versioning

### Failure Handling:
- Fallback to last known good config
- Canary releases
- Automatic rollback

---

## Q2: Design a Distributed Search Index Builder

### Answer:

### Requirements:
- Build index from terabytes of data
- Incremental re-indexing
- Fault tolerance

### Pipeline:
Ingest → Parser → Tokenizer → Sharder → Index Writer → Merger

### Storage:
- Inverted index on SSD
- Metadata store (SQL/NoSQL)

### Scaling:
- Index by term ranges
- Map-reduce style indexing
- Merge segments offline

---

## Q3: Design a Global File Locking Service

### Answer:

### Requirements:
- Exclusive/shared locks
- TTL
- Deadlock prevention

### Architecture:
Clients → Lock Coordinator → Lock Store (Consensus DB)

### Techniques:
- Lease-based locking
- Lock fencing tokens
- Heartbeats

### Safety:
- Majority quorum writes
- Automatic release on TTL

---

## Q4: Design a High-Volume Email Platform

### Answer:

### Requirements:
- Send millions of emails
- Track opens/clicks
- Avoid spam filters

### Pipeline:
Campaign Manager → Queue → Mail Workers → SMTP Providers

### Features:
- IP rotation
- Throttling per ISP
- Bounce handling

---

## Q5: Design a Global Log Aggregation System

### Answer:

### Requirements:
- Collect logs from all services
- Near real-time search
- Retention & archiving

### Pipeline:
Agents → Message Bus → Indexers → Search Cluster

### Storage:
- Hot (Elastic)
- Cold (Object store)

### Scaling:
- Partition by service/time
- Tiered storage

---

## Q6: Design a Real-Time Collaboration Whiteboard

### Answer:

### Requirements:
- Multiple users
- Cursor sharing
- Shape syncing

### Architecture:
Clients ↔ Realtime Hub ↔ State Store

### Technique:
- CRDTs
- Delta updates
- Snapshot replay

---

## Q7: Design a Distributed Trace System

### Answer:

### Requirements:
- Trace request across services
- Visualize latency breakdown

### Pipeline:
Services → Trace Agent → Collector → Storage → UI

### Data Model:
- Trace ID
- Span tree

### Sampling:
- Head-based sampling
- Tail-based sampling

---

## Q8: Design an Offline-First Mobile Backend

### Answer:

### Requirements:
- Work without internet
- Sync later
- Resolve conflicts

### Architecture:
Local DB → Sync Service → Cloud Store

### Strategy:
- Change logs
- Version vectors
- Conflict resolution rules

---

## Q9: Design a Secret Management System

### Answer:

### Requirements:
- Secure storage
- Rotation
- Access audit

### Architecture:
Clients → Secret Manager → Encrypted Store

### Security:
- HSM integration
- Short-lived tokens
- Envelope encryption

---

## Q10: Design a Computational Cluster Manager

### Answer:

### Requirements:
- Schedule workloads
- Resource isolation
- Failure recovery

### Architecture:
Controller → Scheduler → Agents

### Features:
- Bin packing
- Resource quotas
- Preemption

---

# Architect-Level Answer Checklist

1. Global vs local trade-offs  
2. Consistency boundaries  
3. Safe rollout mechanisms  
4. Multi-region failure plans  
5. Observability built-in  
6. Cost modeling  
7. Security by design  
8. Data lifecycle ownership
